<? $this->element('ajax_post', array('action' => '/favorite/add', 'callback' => 'favreg_callback')); ?><?$script =<<< EOD<script type="text/javascript"><!--function favreg_callback(data){    myData = JSON.parse(data, function (key, value) {        var type;        if (value && typeof value === 'object') {            type = value.type;            if (typeof type === 'string' && typeof window[type] === 'function') {                return new (window[type])(value);            }        }        return value;    });    $(".add_favorite")[0].src = "/img/add_favorite_button_on.png";    alert(myData.message);}--></script>EOD;?><? $this->addScript($script) ?><h1><?= $album['Album']['name'] ?></h1><section class="play-slide"><?= $this->Form->create(  'Favorite',  array(    'type' => 'post',    'class' => 'ajaxpost fav'  )) ?><?= $this->Form->submit('add_favorite_button.png', array('class'=>'add_favorite')) ?><?= $this->Form->input('Favorite.id', array('type' => 'hidden', 'value' => $id)); ?><?= $this->Form->end() ?><?= $this->element('slideshow') ?>  <div class="user_profile_detail">    <a href="/profile/<?= $album['Twuser']['screen_name'] ?>" class="user-img"><?= $this->Html->image($album['Twuser']['profile_image_url'], array('alt' =>$album['Twuser']['name'], 'width' => '35px', 'height' => '35px')) ?></a>    <span class="name"><?= $this->Html->link($album['Twuser']['name'], '/profile/' . $album['Twuser']['screen_name']) ?></span>   </div></section>